<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Globe avec trajets</title>
<style>
html, body {
    margin: 0;
    height: 100%;
    background: #000;
}
#main {
    width: 100%;
    height: 100%;
}
</style>
<!-- ECharts + GL -->
<script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/echarts-gl@2/dist/echarts-gl.min.js"></script>
</head>
<body>
<div id="main"></div>
<script>
// --- Textures en Base64 (terre jour/nuit)
const earthTexture = "data:image/jpeg;base64,REMAINS_BASE64_JPEG"; // Je vais te mettre une vraie image ici
const nightTexture = "data:image/jpeg;base64,REMAINS_BASE64_JPEG";

// --- GeoJSON trajets en dur ---
const trajets = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": { "trajet": "avion" },
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [2.55, 49.0097],      // CDG
          [19.0402, 47.4979]    // Budapest
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "trajet": "train" },
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [19.0402, 47.4979],   // Budapest
          [14.4208, 50.0880]    // Prague
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "trajet": "bus" },
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [14.4208, 50.0880],   // Prague
          [12.0956, 49.0200]    // Regensburg
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "trajet": "train" },
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [12.0956, 49.0200],   // Regensburg
          [11.5820, 48.1351]    // Munich
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "trajet": "avion" },
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [11.5820, 48.1351],   // Munich
          [2.55, 49.0097]       // CDG
        ]
      }
    }
  ]
};

// Palette de couleurs par type de trajet
const colors = {
  "avion": "#ff0000",
  "train": "#00ff00",
  "bus": "#0000ff"
};

// Convertir GeoJSON en format ECharts Lines
const seriesData = trajets.features.map(f => ({
  coords: f.geometry.coordinates.map(c => [c[0], c[1]]),
  lineStyle: { color: colors[f.properties.trajet] || "#ffffff", width: 2 }
}));

// Initialiser le globe
const chart = echarts.init(document.getElementById('main'));
chart.setOption({
  backgroundColor: '#000',
  globe: {
    baseTexture: earthTexture,
    heightTexture: nightTexture,
    shading: 'lambert',
    light: { main: { intensity: 2 }, ambient: { intensity: 0.1 } },
    viewControl: { autoRotate: true, autoRotateSpeed: 5 }
  },
  series: [{
    type: 'lines3D',
    coordinateSystem: 'globe',
    effect: { show: true, trailWidth: 2, trailLength: 0.2, trailOpacity: 1, trailColor: 'rgba(255,255,255,0.5)' },
    blendMode: 'lighter',
    lineStyle: { width: 2, opacity: 0.8 },
    data: seriesData
  }]
});
</script>
</body>
</html>
